name: Test DB Password Secrets

on:
  workflow_dispatch:

jobs:
  test-qa:
    name: Verify QA DB Password Secret
    runs-on: ubuntu-latest
    steps:
      - name: Check if secret exists and has length
        run: |
          if [ -z "${{ secrets.SUPABASE_QA_DB_PASSWORD }}" ]; then
            echo "❌ SUPABASE_QA_DB_PASSWORD is empty or not set"
            exit 1
          else
            echo "✅ SUPABASE_QA_DB_PASSWORD is set"
            echo "Length: ${#PASSWORD}"
            echo "First 3 chars: ${PASSWORD:0:3}..."
          fi
        env:
          PASSWORD: ${{ secrets.SUPABASE_QA_DB_PASSWORD }}
  
  test-prod:
    name: Verify Prod DB Password Secret
    runs-on: ubuntu-latest
    steps:
      - name: Check if secret exists and has length
        run: |
          if [ -z "${{ secrets.SUPABASE_PROD_DB_PASSWORD }}" ]; then
            echo "❌ SUPABASE_PROD_DB_PASSWORD is empty or not set"
            exit 1
          else
            echo "✅ SUPABASE_PROD_DB_PASSWORD is set"
            echo "Length: ${#PASSWORD}"
            echo "First 3 chars: ${PASSWORD:0:3}..."
          fi
        env:
          PASSWORD: ${{ secrets.SUPABASE_PROD_DB_PASSWORD }}

